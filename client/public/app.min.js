(()=>{"use strict";var t={version:"1.0.0",window:{width:null,height:null},id:null,roles:[],package:"default",quality:2,developer:{hitboxes:{enabled:!0,color:"red",size:2}},root:{server:{address:"ws://localhost:2023"}},game:{keybinds:{up:"w",down:"s",left:"a",right:"d",slots:{one:"e",two:"r",three:"f",four:"g",five:"t",six:"h"}},ui:{joysticks:{base:{size:150},stick:{size:75},sensitivity:40},healthbar:{base:{width:3,height:25,x:window.innerWidth/2-150,y:window.innerHeight/2*2-50},detail:{width:3,height:25,x:window.innerWidth/2-150,y:window.innerHeight/2*2-50}},slots:{one:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2+150},two:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2+75},three:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2},four:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2-75},five:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2-150},six:{width:100,height:50,x:window.innerWidth-150,y:window.innerHeight/2-225}}},player:{username:"Developer",skin:{body:"default_body",hands:{left:"default_hand_left",right:"default_hand_right"}}}},$:function(e){t=e}},e={ui:{joysticks:[{type:"joystick",id:"joystick_base",src:"packages/".concat(t.package,"/images/game/ui/joysticks/joystick_base.svg")},{type:"joystick",id:"joystick_stick",src:"packages/".concat(t.package,"/images/game/ui//joysticks/joystick_stick.svg")}],healthbar:[{type:"healthbar",id:"healthbar_base",src:"packages/".concat(t.package,"/images/game/ui/healthbar/healthbar_base.svg")},{type:"healthbar",id:"healthbar_detail",src:"packages/".concat(t.package,"/images/game/ui/healthbar/healthbar_detail.svg")}],slots:{system:[{type:"system",id:"slot",src:"packages/".concat(t.package,"/images/game/ui/slots/system/slot.svg")},{type:"system",id:"selected_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/system/selected_slot.svg")}],weapons:{melees:[{type:"melee",id:"hands_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/melees/hands_slot.svg")},{type:"melee",id:"knife_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/melees/knife_slot.svg")},{type:"melee",id:"dagger_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/melees/dagger_slot.svg")},{type:"long_sword",id:"long_sword_slot",creator:"Rose",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/melees/long_sword_slot.svg")}],guns:[{type:"guns",id:"pistol_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/guns/pistol_slot.svg")},{type:"guns",id:"m16_slot",src:"packages/".concat(t.package,"/images/game/ui/slots/weapons/guns/m16_slot.svg")}]}}},skins:[{type:"skin",id:"default_body",src:"packages/".concat(t.package,"/images/game/skins/default_body.svg")},{type:"skin",id:"default_hand_left",src:"packages/".concat(t.package,"/images/game/skins/default_hand_left.svg")},{type:"skin",id:"default_hand_right",src:"packages/".concat(t.package,"/images/game/skins/default_hand_right.svg")}],weapons:{melees:[{type:"melee",id:"hands",src:"packages/".concat(t.package,"/images/game/weapons/melees/hands.svg")},{type:"melee",id:"knife",src:"packages/".concat(t.package,"/images/game/weapons/melees/knife.svg")},{type:"melee",id:"dagger",src:"packages/".concat(t.package,"/images/game/weapons/melees/dagger.svg")},{type:"melee",id:"long_sword",src:"packages/".concat(t.package,"/images/game/weapons/melees/long_sword.svg")}],guns:[{type:"guns",id:"pistol",src:"packages/".concat(t.package,"/images/game/weapons/guns/pistol.svg")},{type:"guns",id:"m16",src:"packages/".concat(t.package,"/images/game/weapons/guns/m16.svg")}]},map:{tiles:[{type:"tile",id:"grass_tile",src:"packages/".concat(t.package,"/images/game/map/tiles/grass.svg")}]}},i={images:[],map:[],players:[],bullets:[],buildings:[],loot:[],plants:[],rules:{},$:function(t){i=t}},s={x:null,y:null,target:{x:null,y:null},start:function(){var e=null;i.players.forEach((function(i){i.id===t.id&&(e=i)})),null!==e&&(this.target.x=e.body.x,this.target.y=e.body.y,this.x=a.unity(e.body.x)-window.innerWidth/2,this.y=a.unity(e.body.y)-window.innerHeight/2,a.ctx.translate(-this.x,-this.y))},stop:function(){a.ctx.translate(this.x,this.y)}},a={ctx:document.querySelector("#game").getContext("2d"),unity:function(t,e){var i=Math.sqrt(Math.pow(window.innerWidth,2)+Math.pow(window.innerHeight,2))/1920*t;return 1===e?Math.floor(i):i},rectangle:function(t,e,i,s,a,l,o){this.ctx.imageSmoothingEnabled=!1,this.ctx.imageSmoothingQuality="high",!1!==this.onScreen(t,e,i,s)&&(t=this.unity(t),e=this.unity(e),i=this.unity(i),s=this.unity(s),o=this.unity(o),this.ctx.beginPath(),this.ctx.rect(t,e,i,s),a&&(this.ctx.fillStyle=a,this.ctx.fill()),l&&(this.ctx.lineWidth=o,this.ctx.strokeStyle=l,this.ctx.stroke()),this.ctx.closePath())},circle:function(t,e,i,s,a,l){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.ctx.imageSmoothingEnabled=!1,this.ctx.imageSmoothingQuality="high",!1!==this.onScreen(t,e,2*i,2*i)&&(!1===o&&(t=this.unity(t),e=this.unity(e)),i=this.unity(i),l=this.unity(l),this.ctx.beginPath(),this.ctx.arc(t,e,i,0,2*Math.PI),s&&(this.ctx.fillStyle=s,this.ctx.fill()),a&&(this.ctx.lineWidth=l,this.ctx.strokeStyle=a,this.ctx.stroke()),this.ctx.closePath())},image:function(t,e,i,s,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],n=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.ctx.imageSmoothingEnabled=!1,this.ctx.imageSmoothingQuality="high",!1===this.onScreen(e,i,s,a)&&!1===n||(!1===o&&(e=this.unity(e),i=this.unity(i),s=this.unity(s),a=this.unity(a)),null!==l?(this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e,i),this.ctx.rotate(l),this.ctx.drawImage(t,-s/2,-a/2,s,a),this.ctx.closePath(),this.ctx.restore()):this.ctx.drawImage(t,e,i,s,a))},clear:function(){this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight)},onScreen:function(e,i,a,l){return e=this.unity(e),i=this.unity(i),a=this.unity(a),l=this.unity(l),!0!=(e+a<0-this.unity(s.target.x)||e-this.unity(s.target.x)>window.innerWidth/t.quality||i+l<0-this.unity(s.target.y)||i-this.unity(s.target.y)>window.innerHeight/t.quality)}},l={keys:[],touch:{left:{active:!1,start:{x:null,y:null},move:{x:null,y:null}},right:{active:!1,start:{x:null,y:null},move:{x:null,y:null}}},mouse:{down:!1,x:null,y:null},events:function(){window.addEventListener("touchstart",(function(e){e.preventDefault();var i=null,s=null;e.touches.length>=2?(s=e.touches[1]).clientX<=window.innerWidth/t.quality/2?(l.touch.left.active=!0,l.touch.left.start.x=s.clientX*t.quality,l.touch.left.start.y=s.clientY*t.quality,l.touch.left.move.x=s.clientX*t.quality,l.touch.left.move.y=s.clientY*t.quality):(l.touch.right.active=!0,l.touch.right.start.x=s.clientX*t.quality,l.touch.right.start.y=s.clientY*t.quality,l.touch.right.move.x=s.clientX*t.quality,l.touch.right.move.y=s.clientY*t.quality):(i=e.touches[0]).clientX<=window.innerWidth/t.quality/2?(l.touch.left.active=!0,l.touch.left.start.x=i.clientX*t.quality,l.touch.left.start.y=i.clientY*t.quality,l.touch.left.move.x=i.clientX*t.quality,l.touch.left.move.y=i.clientY*t.quality):(l.touch.right.active=!0,l.touch.right.start.x=i.clientX*t.quality,l.touch.right.start.y=i.clientY*t.quality,l.touch.right.move.x=i.clientX*t.quality,l.touch.right.move.y=i.clientY*t.quality)}),{passive:!1}),window.addEventListener("touchmove",(function(e){e.preventDefault();var i=null,s=null;e.touches.length>=2?(i=e.touches[0],s=e.touches[1],i.clientX<=window.innerWidth/t.quality/2&&(l.touch.left.move.x=i.clientX*t.quality,l.touch.left.move.y=i.clientY*t.quality),i.clientX>window.innerWidth/t.quality/2&&(l.touch.right.move.x=i.clientX*t.quality,l.touch.right.move.y=i.clientY*t.quality),s&&(s.clientX<=window.innerWidth/t.quality/2&&(l.touch.left.move.x=s.clientX*t.quality,l.touch.left.move.y=s.clientY*t.quality),s.clientX>window.innerWidth/t.quality/2&&(l.touch.right.move.x=s.clientX*t.quality,l.touch.right.move.y=s.clientY*t.quality))):(i=e.changedTouches[0]).clientX<=window.innerWidth/t.quality/2?(l.touch.left.move.x=i.clientX*t.quality,l.touch.left.move.y=i.clientY*t.quality):(l.touch.right.move.x=i.clientX*t.quality,l.touch.right.move.y=i.clientY*t.quality)}),{passive:!1}),window.addEventListener("touchend",(function(e){e.preventDefault(),e.touches.length>0?e.touches[0].clientX<=window.innerWidth/t.quality/2?(l.touch.right.active=!1,l.touch.right.start.x=null,l.touch.right.start.y=null,l.touch.right.move.x=null,l.touch.right.move.y=null):(l.touch.left.active=!1,l.touch.left.start.x=null,l.touch.left.start.y=null,l.touch.left.move.x=null,l.touch.left.move.y=null):(l.touch.left.active=!1,l.touch.right.active=!1,l.touch.left.start.x=null,l.touch.left.start.y=null,l.touch.right.start.x=null,l.touch.right.start.y=null,l.touch.left.move.x=null,l.touch.left.move.y=null,l.touch.right.move.x=null,l.touch.right.move.y=null);var i={type:"stop_move",data:{id:t.id,direction:[],hit:!1}};r.send(i)}),{passive:!1}),window.addEventListener("dbclick",(function(t){t.preventDefault()}),{passive:!1}),window.addEventListener("mousemove",(function(e){l.mouse.x=e.clientX*t.quality-window.innerWidth/2,l.mouse.y=e.clientY*t.quality-window.innerHeight/2;var i={type:"update_mouse",data:{id:t.id,mouse:l.mouse}};r.send(i)})),window.addEventListener("mousedown",(function(e){e.preventDefault(),l.mouse.down=!0;var i={type:"update_mouse",data:{id:t.id,mouse:l.mouse}};r.send(i)}),{passive:!1}),window.addEventListener("mouseup",(function(e){l.mouse.down=!1;var i={type:"update_mouse",data:{id:t.id,mouse:l.mouse}};r.send(i)})),window.addEventListener("keydown",(function(e){l.keys.includes(e.key.toLowerCase())||l.keys.push(e.key.toLowerCase());var i=[];if(l.keys.includes(t.game.keybinds.up)&&i.push(270),l.keys.includes(t.game.keybinds.down)&&i.push(90),l.keys.includes(t.game.keybinds.left)&&i.push(180),l.keys.includes(t.game.keybinds.right)&&i.push(0),0!==i.length){var s={type:"update_move",data:{id:t.id,direction:i}};r.send(s)}var a=[];if(l.keys.includes(t.game.keybinds.slots.one)&&a.push(1),l.keys.includes(t.game.keybinds.slots.two)&&a.push(2),l.keys.includes(t.game.keybinds.slots.three)&&a.push(3),l.keys.includes(t.game.keybinds.slots.four)&&a.push(4),l.keys.includes(t.game.keybinds.slots.five)&&a.push(5),l.keys.includes(t.game.keybinds.slots.six)&&a.push(6),0!==a.length){var o={type:"update_selection",data:{id:t.id,selection:a}};r.send(o)}})),window.addEventListener("keyup",(function(e){var i=[];l.keys.forEach((function(t){t!==e.key&&i.push(t)})),l.keys=i;var s=[];l.keys.includes(t.game.keybinds.up)&&s.push(270),l.keys.includes(t.game.keybinds.down)&&s.push(90),l.keys.includes(t.game.keybinds.left)&&s.push(180),l.keys.includes(t.game.keybinds.right)&&s.push(0);var a={type:"stop_move",data:{id:t.id,direction:s}};r.send(a)}))}};setTimeout((function(){console.log(i)}),5e3);function o(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var u=function(){if(console.log("%c[game.js] Running game.run()...","color: #0074ff"),null!==t.id){l.events(),document.querySelector("#homemenu").style.display="none",document.querySelector("#game").style.display="block";var e={type:"request_new_player",data:t};r.send(e),function e(){var o=null;i.players.forEach((function(e){e.id===t.id&&(o=e)})),null!==o&&(function(){if(!0===l.touch.left.active){var e=l.touch.left.start.x-l.touch.left.move.x,i=l.touch.left.start.y-l.touch.left.move.y,s=180*Math.atan2(i,e)/Math.PI+180,a=[];a.push(s);var o={type:"update_move",data:{id:t.id,direction:a}};r.send(o)}if(!0===l.touch.right.active){var n=!1,u=l.touch.right.start.x-l.touch.right.move.x,h=l.touch.right.start.y-l.touch.right.move.y,c=Math.sqrt(Math.pow(u,2)+Math.pow(h,2)),g=Math.atan2(h,u)-1.5*Math.PI;Math.PI,c>=t.game.ui.joysticks.sensitivity&&(n=!0);var y={type:"update_angle",data:{id:t.id,angle:g,hit:n}};r.send(y)}}(),function(){var e={type:"update_selection",data:{id:t.id,selection:[]}};function i(t,e,i,s,a,l){return t>=i&&t<=i+a&&e>=s&&e<=s+l}!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.one.x*t.quality,t.game.ui.slots.one.y*t.quality,t.game.ui.slots.one.width*t.quality,t.game.ui.slots.one.height*t.quality)&&e.data.selection.push(1),!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.two.x*t.quality,t.game.ui.slots.two.y*t.quality,t.game.ui.slots.two.width*t.quality,t.game.ui.slots.two.height*t.quality)&&e.data.selection.push(2),!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.three.x*t.quality,t.game.ui.slots.three.y*t.quality,t.game.ui.slots.four.width*t.quality,t.game.ui.slots.three.height*t.quality)&&e.data.selection.push(3),!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.four.x*t.quality,t.game.ui.slots.four.y*t.quality,t.game.ui.slots.three.width*t.quality,t.game.ui.slots.four.height*t.quality)&&e.data.selection.push(4),!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.four.x*t.quality,t.game.ui.slots.four.y*t.quality,t.game.ui.slots.five.width*t.quality,t.game.ui.slots.four.height*t.quality)&&e.data.selection.push(5),!0===i(l.touch.right.start.x,l.touch.right.start.y,t.game.ui.slots.five.x*t.quality,t.game.ui.slots.five.y*t.quality,t.game.ui.slots.six.width*t.quality,t.game.ui.slots.five.height*t.quality)&&e.data.selection.push(6),0!==e.data.selection.length&&r.send(e)}(),a.clear(),s.start(),function(){for(var e=function(e){for(var s=function(s){0===i.map[s][e]&&i.images.forEach((function(l){"grass_tile"===l.id&&"tile"===l.type&&(a.image(l,e*i.rules.map.tiles.size,s*i.rules.map.tiles.size,i.rules.map.tiles.size,i.rules.map.tiles.size),!0===t.roles.includes("Developer")&&!0===t.developer.hitboxes.enabled&&a.rectangle(e*i.rules.map.tiles.size,s*i.rules.map.tiles.size,i.rules.map.tiles.size,i.rules.map.tiles.size,null,t.developer.hitboxes.color,t.developer.hitboxes.size))}))},l=0;l<i.map[e].length;l++)s(l)},s=0;s<i.map.length;s++)e(s)}(),i.players.forEach((function(e){i.images.forEach((function(s){e.skin.body===s.id&&(a.image(s,e.body.x,e.body.y,i.rules.players.body.size,i.rules.players.body.size,e.angle),!0===t.roles.includes("Developer")&&!0===t.developer.hitboxes.enabled&&(a.rectangle(e.body.x-i.rules.players.body.size/2,e.body.y-i.rules.players.body.size/2,i.rules.players.body.size,i.rules.players.body.size,null,t.developer.hitboxes.color,t.developer.hitboxes.size),a.circle(e.body.x,e.body.y,i.rules.players.body.size/2,null,t.developer.hitboxes.color,t.developer.hitboxes.size)))}))})),i.players.forEach((function(t){t.slots.forEach((function(t){!0===t.selected&&i.images.forEach((function(e){e.id===t.id&&a.image(e,t.position.right.x,t.position.right.y,t.width,t.height,t.position.right.angle)}))}))})),i.bullets.forEach((function(t){var e=t.x,i=t.y,s=6,l=12,o="yellow",n=2;!1!==a.onScreen(e,i,s,l)&&(e=a.unity(e),i=a.unity(i),s=a.unity(s),l=a.unity(l),n=a.unity(n),a.ctx.save(),a.ctx.translate(e,i),a.ctx.rotate(t.angle),a.ctx.rect(0,0,s,l),a.ctx.fillStyle="red",a.ctx.fill(),o&&(a.ctx.lineWidth=n,a.ctx.strokeStyle=o,a.ctx.stroke()),a.ctx.restore())})),i.players.forEach((function(e){i.images.forEach((function(s){e.skin.hands.left===s.id&&(a.image(s,e.hands.left.x,e.hands.left.y,i.rules.players.hands.left.size,i.rules.players.hands.left.size,e.angle),!0===t.roles.includes("Developer")&&!0===t.developer.hitboxes.enabled&&(a.rectangle(e.hands.left.x-i.rules.players.hands.left.size/2,e.hands.left.y-i.rules.players.hands.left.size/2,i.rules.players.hands.left.size,i.rules.players.hands.left.size,null,t.developer.hitboxes.color,t.developer.hitboxes.size),a.circle(e.hands.left.x,e.hands.left.y,i.rules.players.hands.left.size/2,null,t.developer.hitboxes.color,t.developer.hitboxes.size)))})),i.images.forEach((function(s){e.skin.hands.right===s.id&&(a.image(s,e.hands.right.x,e.hands.right.y,i.rules.players.hands.right.size,i.rules.players.hands.right.size,e.angle),!0===t.roles.includes("Developer")&&!0===t.developer.hitboxes.enabled&&(a.rectangle(e.hands.right.x-i.rules.players.hands.right.size/2,e.hands.right.y-i.rules.players.hands.right.size/2,i.rules.players.hands.right.size,i.rules.players.hands.right.size,null,t.developer.hitboxes.color,t.developer.hitboxes.size),a.circle(e.hands.right.x,e.hands.right.y,i.rules.players.hands.right.size/2,null,t.developer.hitboxes.color,t.developer.hitboxes.size)))}))})),s.stop(),i.players.forEach((function(e){e.id===t.id&&(i.images.forEach((function(e){"healthbar_base"===e.id&&a.image(e,t.game.ui.healthbar.base.x*t.quality,t.game.ui.healthbar.base.y*t.quality,100*t.game.ui.healthbar.base.width*t.quality,t.game.ui.healthbar.base.height*t.quality,null,!0,!0)})),i.images.forEach((function(i){"healthbar_detail"===i.id&&a.image(i,t.game.ui.healthbar.detail.x*t.quality,t.game.ui.healthbar.detail.y*t.quality,t.game.ui.healthbar.detail.width*e.health*t.quality,t.game.ui.healthbar.detail.height*t.quality,null,!0,!0)})))})),i.players.forEach((function(e){e.slots.forEach((function(e){i.images.forEach((function(s){1===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.one.x*t.quality,t.game.ui.slots.one.y*t.quality,t.game.ui.slots.one.width*t.quality,t.game.ui.slots.one.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.one.x*t.quality,t.game.ui.slots.one.y*t.quality,t.game.ui.slots.one.width*t.quality,t.game.ui.slots.one.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.one.x*t.quality,t.game.ui.slots.one.y*t.quality,t.game.ui.slots.one.width*t.quality,t.game.ui.slots.one.height*t.quality,null,!0,!0)),2===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.two.x*t.quality,t.game.ui.slots.two.y*t.quality,t.game.ui.slots.two.width*t.quality,t.game.ui.slots.two.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.two.x*t.quality,t.game.ui.slots.two.y*t.quality,t.game.ui.slots.two.width*t.quality,t.game.ui.slots.two.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.two.x*t.quality,t.game.ui.slots.two.y*t.quality,t.game.ui.slots.two.width*t.quality,t.game.ui.slots.two.height*t.quality,null,!0,!0)),3===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.three.x*t.quality,t.game.ui.slots.three.y*t.quality,t.game.ui.slots.three.width*t.quality,t.game.ui.slots.three.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.three.x*t.quality,t.game.ui.slots.three.y*t.quality,t.game.ui.slots.three.width*t.quality,t.game.ui.slots.three.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.three.x*t.quality,t.game.ui.slots.three.y*t.quality,t.game.ui.slots.three.width*t.quality,t.game.ui.slots.three.height*t.quality,null,!0,!0)),4===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.four.x*t.quality,t.game.ui.slots.four.y*t.quality,t.game.ui.slots.four.width*t.quality,t.game.ui.slots.four.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.four.x*t.quality,t.game.ui.slots.four.y*t.quality,t.game.ui.slots.four.width*t.quality,t.game.ui.slots.four.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.four.x*t.quality,t.game.ui.slots.four.y*t.quality,t.game.ui.slots.four.width*t.quality,t.game.ui.slots.four.height*t.quality,null,!0,!0)),5===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.five.x*t.quality,t.game.ui.slots.five.y*t.quality,t.game.ui.slots.five.width*t.quality,t.game.ui.slots.five.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.five.x*t.quality,t.game.ui.slots.five.y*t.quality,t.game.ui.slots.five.width*t.quality,t.game.ui.slots.five.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.five.x*t.quality,t.game.ui.slots.five.y*t.quality,t.game.ui.slots.five.width*t.quality,t.game.ui.slots.five.height*t.quality,null,!0,!0)),6===e.slotNumber&&s.id===e.slot&&(i.images.forEach((function(i){!1===e.selected&&"slot"===i.id&&a.image(i,t.game.ui.slots.six.x*t.quality,t.game.ui.slots.six.y*t.quality,t.game.ui.slots.six.width*t.quality,t.game.ui.slots.six.height*t.quality,null,!0,!0),!0===e.selected&&"selected_slot"===i.id&&a.image(i,t.game.ui.slots.six.x*t.quality,t.game.ui.slots.six.y*t.quality,t.game.ui.slots.six.width*t.quality,t.game.ui.slots.six.height*t.quality,null,!0,!0)})),a.image(s,t.game.ui.slots.six.x*t.quality,t.game.ui.slots.six.y*t.quality,t.game.ui.slots.six.width*t.quality,t.game.ui.slots.six.height*t.quality,null,!0,!0))}))}))})),function(){var e=l.touch.left.start.x-l.touch.left.move.x,s=l.touch.left.start.y-l.touch.left.move.y,o=Math.atan2(s,e)+Math.PI;Math.sqrt(Math.pow(e,2)+Math.pow(s,2))>t.game.ui.joysticks.base.size*t.quality/2&&(l.touch.left.move.x=l.touch.left.start.x+t.game.ui.joysticks.base.size*t.quality/2*Math.cos(o),l.touch.left.move.y=l.touch.left.start.y+t.game.ui.joysticks.base.size*t.quality/2*Math.sin(o));var n=l.touch.right.start.x-l.touch.right.move.x,u=l.touch.right.start.y-l.touch.right.move.y,r=Math.atan2(u,n)+Math.PI;Math.sqrt(Math.pow(n,2)+Math.pow(u,2))>t.game.ui.joysticks.base.size*t.quality/2&&(l.touch.right.move.x=l.touch.right.start.x+t.game.ui.joysticks.base.size*t.quality/2*Math.cos(r),l.touch.right.move.y=l.touch.right.start.y+t.game.ui.joysticks.base.size*t.quality/2*Math.sin(r)),i.images.forEach((function(e){"joystick_base"===e.id&&"joystick"===e.type&&(null!==l.touch.left.start.x&&null!==l.touch.left.start.y&&a.image(e,l.touch.left.start.x-t.game.ui.joysticks.base.size*t.quality/2,l.touch.left.start.y-t.game.ui.joysticks.base.size*t.quality/2,t.game.ui.joysticks.base.size*t.quality,t.game.ui.joysticks.base.size*t.quality,null,!0,!0),null!==l.touch.right.start.x&&null!==l.touch.right.start.y&&a.image(e,l.touch.right.start.x-t.game.ui.joysticks.base.size*t.quality/2,l.touch.right.start.y-t.game.ui.joysticks.base.size*t.quality/2,t.game.ui.joysticks.base.size*t.quality,t.game.ui.joysticks.base.size*t.quality,null,!0,!0)),"joystick_stick"===e.id&&"joystick"===e.type&&(null!==l.touch.left.move.x&&null!==l.touch.left.move.y&&a.image(e,l.touch.left.move.x-t.game.ui.joysticks.stick.size*t.quality/2,l.touch.left.move.y-t.game.ui.joysticks.stick.size*t.quality/2,t.game.ui.joysticks.stick.size*t.quality,t.game.ui.joysticks.stick.size*t.quality,null,!0,!0),null!==l.touch.right.move.x&&null!==l.touch.right.move.y&&a.image(e,l.touch.right.move.x-t.game.ui.joysticks.stick.size*t.quality/2,l.touch.right.move.y-t.game.ui.joysticks.stick.size*t.quality/2,t.game.ui.joysticks.stick.size*t.quality,t.game.ui.joysticks.stick.size*t.quality,null,!0,!0))}))}()),requestAnimationFrame(e)}()}else console.log("%c[game.js] ID (in scripts/root/settings/settings.js -> settings.id) is null...","color: #fc0000")};!function(){document.querySelector("#game"),console.log("%c[game.js] Running game.preload()...","color: #0074ff");var t=[].concat(o(e.ui.joysticks),o(e.ui.healthbar),o(e.ui.slots.system),o(e.ui.slots.weapons.melees),o(e.ui.slots.weapons.guns),o(e.skins),o(e.weapons.melees),o(e.weapons.guns),o(e.map.tiles)),s=[];t.forEach((function(t){var e=new Image;e.type=t.type,e.id=t.id,e.src=t.src,s.push(e)}));var a=i;a.images=s,i.$(a)}();var r={portal:new WebSocket(t.root.server.address),events:function(){console.log("%c[server.js] Running server.events()...","color: #0074ff"),this.portal.addEventListener("open",(function(){console.log("%c[server.js] Connection opened...","color: #00cc22")})),this.portal.addEventListener("close",(function(){console.log("%c[server.js] Connection closed...","color: #fc0000")})),this.portal.addEventListener("message",(function(e){var s=JSON.parse(e.data),a=s.type,l=s.data;if("approve_ID"===a){var o=t;o.id=l,t.$(o)}if("approve_game_start"===a&&function(){console.log("%c[game.js] Running game.prepare()...","color: #0074ff");var e=document.querySelector("#game"),i=t;i.window.width=window.innerWidth,i.window.height=window.innerHeight,t.$(i),window.innerWidth=window.innerWidth*t.quality,window.innerHeight=window.innerHeight*t.quality,e.width=window.innerWidth,e.height=window.innerHeight}(),"update_data"===a){var n=i;n.map=l.map,n.players=l.players,n.bullets=l.bullets,n.buildings=l.buildings,n.plants=l.plants,n.rules=l.rules,i.$(n)}}))},send:function(t){t=JSON.stringify(t),this.portal.send(t)}};r.events();var h=function(){function e(t){return document.querySelector(t)}e("#keybindsup").value=t.game.keybinds.up,e("#keybindsdown").value=t.game.keybinds.down,e("#keybindsleft").value=t.game.keybinds.left,e("#keybindsright").value=t.game.keybinds.right,e("#quality").value=t.quality},c=function(){var e=t;function i(t){return document.querySelector(t)}e.game.player.username=i("#username").value,t.quality=i("#quality").value,window.innerWidth=t.window.width*t.quality,window.innerHeight=t.window.height*t.quality,i("#game").width=window.innerWidth,i("#game").height=window.innerHeight,t.$(e),console.log(t)},g={active:function(){var e=document.querySelector("#playerdisplay").getContext("2d"),s=document.querySelector("#playerdisplay");s.width=500,s.height=500;var a=s.width,l=s.height;e.clearRect(0,0,a,l),i.images.forEach((function(i){i.id===t.game.player.skin.body&&e.drawImage(i,a/2-100,l/2-100,210,210)})),i.images.forEach((function(i){i.id===t.game.player.skin.hands.left&&e.drawImage(i,a/2-100-13.5,l/2-100-15,81,81)})),i.images.forEach((function(i){i.id===t.game.player.skin.hands.right&&e.drawImage(i,a/2+50-13.5,l/2-100-15,81,81)})),requestAnimationFrame((function(){g.active()}))}};console.log("%c[home.js] Running home.generate()...","color: #0074ff"),document.querySelector("#version").innerHTML="Version ".concat(t.version),function(){function t(t){return document.querySelector(t)}t("#play").onclick=function(){h(),c(),u()},t("#settings").onclick=function(){t("#menu").style.display="block",t("#settingsmenu").style.display="grid",h()},t("#menuclose").onclick=function(){t("#menu").style.display="none",t("#settingsmenu").style.display="none",c()}}(),g.active(),function(){for(var t=document.getElementsByClassName("designAlphaDynamic"),e=0;e<t.length;e++)t[e].addEventListener("click",(function(){}))}()})();